{% extends "base.html" %}

{% block title %}Home - ProdigyHabit{% endblock %}

{% block content %}
<div class="home-container" style="text-align: center; padding-top: 2rem;">

    {% if current_user.is_authenticated %}
        {# --- Logged-in user view --- #}
        <article>
            <header>
                <h2>おかえりなさい, {{ current_user.name }}さん！</h2>
            </header>
            
            {% if todays_log_exists %}
                <p style="font-size: 1.1rem; color: var(--pico-color-green-500);">
                    <i class="material-icons" style="vertical-align: middle;">check_circle</i>
                    素晴らしい！今日の生産性も記録済みです。この調子で頑張りましょう！
                </p>
                <a role="button" href="{{ url_for('history') }}" class="secondary">履歴を見る</a>
            {% else %}
                <p style="font-size: 1.1rem;">今日の生産性を記録して、一日を振り返りましょう。</p>
                <a role="button" href="{{ url_for('entry') }}">今日の記録をつけにいく ✍️</a>
            {% endif %}
            
            <footer>
                <a href="{{ url_for('logout') }}" class="secondary outline">ログアウト</a>
            </footer>
        </article>

    {% else %}
        {# --- Logged-out user view --- #}
        <article>
            <header>
                <h2>ProdigyHabitへようこそ！</h2>
            </header>
            <p>
                ProdigyHabitは、日々の生産性を記録し、<br>
                AIからのパーソナライズされたフィードバックであなたの成長をサポートするアプリケーションです。
            </p>
            <p>まずはGoogleアカウントでログインして、今日から記録を始めましょう。</p>
            <footer>
                <a role="button" href="{{ url_for('login') }}" class="contrast" style="font-size: 1.2rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 0.5rem;"><path fill="currentColor" d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.75 8.36,4.73 12.19,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.19,2C6.42,2 2.03,6.8 2.03,12C2.03,17.2 6.42,22 12.19,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1Z"></path></svg>
                    Googleでログイン
                </a>
            </footer>
        </article>
    {% endif %}

</div>
{% endblock %}
